services:
  app:
    build: .
    volumes:
      - ./src:/app/src
      - ./tests:/app/tests
      - ./config.yaml:/app/config.yaml:ro
      - ~/.aws:/root/.aws:ro
      - data:/data
    environment:
      - AWS_PROFILE=${AWS_PROFILE:-default}
      - AWS_BEDROCK_REGION=${AWS_BEDROCK_REGION:-us-east-1}
      - AWS_COST_DB_PATH=/data/costs.duckdb
      - AWS_COST_CACHE_DIR=/data/cache
    entrypoint: ["bash"]
    stdin_open: true
    tty: true

volumes:
  data:
